{"componentChunkName":"component---src-templates-page-template-js","path":"/buildingAConfigDrivenUiInReactPart1","result":{"pageContext":{"page":{"author":"Arun Madhavan","content":"<p>This is the first part of the 2 part blog, where I share my experience in putting together a configuration driven user interface.</p>\n<p>The solution consisted of the actual UI that is generated by configuration and admin app where a user can drag and drop to build the configuration.\nThis blog specifically talks about how we handled the UI based on a JSON configuration.</p>\n<h2>TL;DR</h2>\n<p>We built a configuration driven UI that consisted of 2 parts,</p>\n<ul>\n<li>One to define the layout, which consisted of a recursive structure to hold vertically and horizontally stacked elements</li>\n<li>The second being a mapping of the leaf nodes ( using an id ), to define what needs to be displayed in it's place.</li>\n</ul>\n<p>The rest of the blog goes into detail on how this was accomplished.</p>\n<h2>The Problem</h2>\n<p>Our customer wanted to build an enterprise dashboard to help them see dimensions of data together.\nMultiple such pages can be built, with different layout depending on the dimension.</p>\n<p>Most importantly they wanted minimal or no dependency on developers for any incremental page addition</p>\n<h1>10,000ft Solution</h1>\n<p>A part of our solution looked something like below.</p>\n<p><img src=\"./solution-blocks.png\" alt=\"Solution Blocks\"></p>\n<p>The DnD Config Generator helped to assemble the UI components together and persist them into a backend\nThe configuration was served to the Config Driven UI component to paint the page as dictated by the JSON.</p>\n<h2>The Config Driven UI</h2>\n<p>Logical starting point was to put together the config driven UI first to understand what kind of configuration is required to be generated ( and ofcourse to showcase to the customer their dashboard, which is of higher business value).</p>\n<p>So we started to break down our problem and came up with 2 major components.</p>\n<ul>\n<li>Building the Layout</li>\n<li>Filling the gaps in the layout with actual values such as titles, visualizations and summary. We call this as an <strong>Element</strong>.</li>\n</ul>\n<h3>Layout</h3>\n<p>The layout consisted of a elements that can be stacked vertically, or horizontally.\nSo we needed containers that would let to stack the elements either vertically or horizontally.\nThese can be recursive letting horziontal and vertical be stacked inside each other as well as shown in the example below.</p>\n<p><img src=\"./layout.png\" alt=\"Layout example\"></p>\n<p>To achieve this we needed a <em>Recursive JSON configuration</em>.</p>\n<h3>Building the JSON configuration</h3>\n<p>We wanted to capture the following</p>\n<ul>\n<li>A way to identify Horizontal/ Vertical / Element</li>\n<li>Define widths of the Elements ( especially useful when horizontally stacked)</li>\n<li>Identify the elements with an <code>id</code> so that it can be replaced with content ( more of this later in the blog )</li>\n<li>Other configurations to appropriately paint the content inside an element.</li>\n</ul>\n<p>So a sample JSON looked something like this.</p>\n<pre><code class=\"language-json\">{\n  \"type\": \"Element\",\n  \"config\": {\n    \"id\": \"e1\",\n    \"height\": \"200px\",\n    \"color\": \"yellow\",\n    \"width\": \"12\"\n  },\n  \"children\": []\n}\n</code></pre>\n<table>\n<thead>\n<tr>\n<th>Property</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>type</td>\n<td>One of the values in Element, Vertical or Horizontal</td>\n</tr>\n<tr>\n<td>config</td>\n<td>Consists of a property <code>id</code> and other properties to help draw the element</td>\n</tr>\n<tr>\n<td>children</td>\n<td>An array of child nodes, which follow the same format</td>\n</tr>\n</tbody>\n</table>\n<p>Typically an <code>Element</code> will have an empty children and the others would have one or more items.</p>\n<p>You can find a sample full blown JSON <a href=\"./src/config/PageFormat.js\">here</a></p>\n<h3>Working with the JSON</h3>\n<p>We used Material-UI as part of the project, and leveraged it's Grid to help with drawing our layout.</p>\n<p>The Material UI defines Grids using <code>&#x3C;Grid \\></code> tag. You can define a <code>&#x3C;Grid container \\></code> that would contain many <code>&#x3C;Grid item \\></code> which would have the content.\nThe <code>&#x3C;Grid item \\></code> can also take a parameter called <code>xs</code> which can be a number between 1- 12 as defined by it's 12 grid layout.</p>\n<p>Translating this to our solution, we will</p>\n<ul>\n<li>Have a Grid container for each of the <code>Vertical</code> items</li>\n<li>No special handling for <code>Horizontal</code> and just let the children be created</li>\n<li><code>Elements</code> are rendered inside a Grid Item.</li>\n</ul>\n<p>In the above case, both the <code>Elements</code> and <code>Vertical</code> are set with the width passed to it.</p>\n<p>So we created a class called the <a href=\"src/components/grid/GridContainer.js\">GridContainer</a> that\ntakes an input config, which is nothing but a single element of the JSON, checks for it's type to be one in \"Vertical\", \"Horizontal\" or \"Element\" and</p>\n<ul>\n<li>For Vertical<ul>\n<li>It wraps inside a <code>&#x3C;Grid item /></code></li>\n<li>Iterates through all it's children and wraps them with a <code>&#x3C;Grid container /></code> each</li>\n<li>Invokes the <code>GridContainer</code> again ( recursively ) with the child config value.</li>\n</ul></li>\n<li>For Horizontal<ul>\n<li>Iterates through the children and invokes the <code>GridContainer</code> for each of it's children.</li>\n</ul></li>\n<li>For Elements<ul>\n<li>Uses the config and draws the element.</li>\n</ul></li>\n</ul>\n<p>The Key element of this class is how the config is used to build the layout in a recursive fashion.</p>\n<h2>Handling the Elements</h2>\n<p>Each of the <code>Elements</code> in the grid can contain a different type of element.\nAs it was an executive dashboard, we needed a bunch of plots and their titles ( simplifying the problem for the blogs sake ).</p>\n<p>As mentioned earlier, each of the <code>Elements</code> holds an <code>id</code> and we gave a separate mapping for each of these Ids, that consisted of</p>\n<ul>\n<li><code>type</code> which can be <code>title</code> or <code>plot</code></li>\n<li><code>config</code> which is an object that consists of the values required for each of the types of elements.</li>\n</ul>\n<p>This helped us to extend the number of types easily, by having a flexible config for each type of element.<br>\nThe <a href=\"./src/components/element/Element.js\">Element</a> checks for the type and delegates it's rendering to the corresponding type ( in this case a <a href=\"./src/components/element/Title.js\">Title</a> or a <a href=\"./src/components/element/Plotly.js\">Plot</a></p>\n<h2>Summary</h2>\n<p>The overall configuration looked like <a href=\"./src/config/PageFormat.js\">this</a> that consisted of</p>\n<ul>\n<li>Page Layout consisting of *<code>Horizontal</code>, <code>Vertical</code> and <code>Elements</code> that helped us draw the layout.<ul>\n<li>The <code>Horizontal</code> and <code>Vertical</code> components would have <code>children</code> and the structure can be recursive.</li>\n<li>Each <code>Element</code> had an <code>id</code></li>\n</ul></li>\n<li>Viz Configuration consisting of<ul>\n<li>Mapping for each of the <code>id</code> from the <code>Elements</code></li>\n<li>Can be of different types, in this case <code>Title</code> and <code>Plot</code></li>\n</ul></li>\n</ul>\n<p>In the <a href=\"https://techmusings.dev/buildingAConfigDrivenUiInReactPart2\">Part 2</a> of this blog post, we'll see how we were able to build this configuration using Drag and Drop components and persist the same into a backend.</p>\n","description":"Part 1 of a 2 part blog, where I share my experiences with development of a configuration driven UI to build their executive dashboard","pagePath":"arunmadhavan-g/config-driven-ui","publishedOn":"2019-11-24T12:39:18.088Z","tags":["reactjs","javascript","ui"],"title":"Building a Config Driven UI in React - Part 1"}}}}